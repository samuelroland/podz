# Journal de travail - TPI Samuel Roland

| Date  | Sprint | Tâche | Temps<br>[1/2h] | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| ----- | ------ | ----- | --------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 02.05 | 1      | #1    | 4               | Rencontre avec l'expert 1 et signature du CdC. Les tâches de la planification ne devront pas être en dessous de 2h.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 02.05 | 1      | #1    | 3               | Rencontre avec le chef de projet. Réponses à mes questions. Le point technique "Lecture audio du podcast bien réalisée." signifie simplement que l'on doit pouvoir écouter l'audio et mettre en pause (une balise `<audio>` suffit). "des commits atomiques" signifie des commits qui ne font qu'une seule chose. "Ergonomie de l’interface utilisateur." signifie que l'interface doit être proprement affichée et utilisable (pas de titres superposés ou de choses invisibles). Le concept de visibilité des épisodse a aussi été discuté: pour les autres utilisateurs que l'auteur, l'épisode est affiché que s'il est marqué visible et que sa date de publication est dans le passé.           |
| 02.05 | 1      | #3    | 2               | J'ai setup un nouveau projet Laravel et un repos `podz`. J'ai installé Jetstream directement comme au PréTPI, avec l'option Livewire et les vues publiées du vendor. J'ai ensuite changé le logo de Jetstream par celui de Podz.                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|       |        | #22   | 5               | J'ai fait ma planification pour ce projet, j'étais un peu pertubé parce que j'ai l'impression d'avoir moins à faire que pour que le Pré-TPI tout en ayant plus de temps et plus d'expérience... J'avais un problème pour avoir sur une capture d'écran tout le planning avec les sprints, tâches et l'estimation de temps, j'ai donc finalement fait plusieurs captures d'écrans pour y arriver. En conclusion, journée moyenne niveau avancée, je n'étais pas focus à 100% comme je l'espérais.                                                                                                                                                                                                      |
|       |        |       |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 03.05 | 1      | #22   | 5               | M. Hurni m'a fait un retour sur mon planning, et j'ai pu faire de nombreuses corrections. J'ai augmenté certains temps, divisé en plusieurs tâches parfois, et aussi renommé les tâches pour avoir les même noms que dans le CdC.                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| 03.05 | 1      | #18   | 3               | J'ai fait le MCD, ce n'était pas très compliqué: 3 tables et 2 associations. J'ai aussi documenté les champs particuliers dans ma documentation.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 03.05 | 1      | #2    | 2               | J'ai fait les migrations pour les `podcasts`, `users` et `episodes`, puis j'ai rétroingénieré le MLD avec MySQL Workbench. J'ai donc un MCD et MLD en v1 qui me paraissent fini. Plutôt content de la journée et de l'avancée, plus que les maquettes et un peu de documentation et je pourrais passer à du code.                                                                                                                                                                                                                                                                                                                                                                                     |
|       |        |       |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 05.05 | 1      | #10   | 6               | J'ai créé la page de couverture en HTML dans ma documentation en Markdown pour que ce soit propre à l'export PDF, j'y ai ajouté le logo de Podz. J'ai importé toutes les sections du canevas CPNV. J'ai fait un premier brouillon concernant les technologies.                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 05.05 | 1      | #4    | 4               | J'ai commencé et bien avancé dans les maquettes et j'ai documenté les points qui n'étaient pas visibles pour ma documentation. Plutôt bonne journée de travail, je pourrais commencer à coder demain.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|       |        |       |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 06.05 | 1      | #4    | 4               | J'ai fini de documenter mes maquettes, j'ai fait quelques corrections et ajouts sur mes maquettes pour les erreurs que j'ai trouvé. Elles sont maintenant bien terminés.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 06.05 | 1      | #5    | 6               | (J'ai fini ma semaine donc j'ai déplacé cette tâche du sprint 2 en sprint 1).  J'ai fait la Consultation de la liste des podcasts, j'ai écrit 5 tests avant de coder dont 2 tests unitaires. J'ai implémenté ce qu'il fallait pour faire passer mes tests, puis j'ai fait le design de ma page.                                                                                                                                                                                                                                                                                                                                                                                                       |
| 06.05 | 1      | #10   | 1               | Documentation d'un point technique pour la page Podcasts, journal de travail, liens sur le détails d'un podcast, refactorisations du gabarit fait par Jetstream pour l'utiliser tout le temps. Journée plutôt chouette, content d'avoir écrit des tests et fini cette page de liste des podcasts.                                                                                                                                                                                                                                                                                                                                                                                                     |
|       |        |       |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 09.05 | 2      | #9    | 2               | J'ai ajouté un champ supplémentaire dans ma base de données (donc dans mon MCD, mon MLD et mes migrations également): une description longue des épisodes. (comme pour les podcasts, `episodes` en taille max de 2000 charactères). Ce champ n'est pas demandé par le CDC mais j'ai pensé que ça faisait sens de le rajouter (puisque ça existe dans la vie réelle). Le MCD et le MLD sont maintenant en v2.                                                                                                                                                                                                                                                                                          |
| 09.05 | 2      | #9    | 2               | J'avais prévu de faire que la date de publication des épisodes puisse être nulle, afin de pouvoir créer un épisode et plus tard le publier en définissant une date, mais finalement cela complique de faire en 2 étapes et n'est pas très utile, donc j'ai changé le champ en non-nul. J'ai corrigé ma documentation pour ce sujet.                                                                                                                                                                                                                                                                                                                                                                   |
| 09.05 | 2      |       | 1               | J'ai aidé Benoît et Christopher pour différent problèmes, comme je suis un peu en avance.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 09.05 | 2      | #9    | 5               | J'ai écrit un test pour la page de détails d'un podcast (auteur), pour s'assurer que toutes les informations étaient affichées. Ensuite j'ai implémenté et designé cette page selon la maquette. J'ai ordré la liste des épisodes dans l'ordre décroissant par numéro. Assez content de ma journée.                                                                                                                                                                                                                                                                                                                                                                                                   |
|       |        |       |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 10.05 | 2      | #9    | 3               | Je me suis attaqué au problème de chargement de l'audio dans le navigateur, après un bon moment de recherches et d'essais, j'ai compris que le AAC (dans lequel était encodé mon fichier audio de test) n'était pas supporté par Firefox de base (codec propriétaire) et donc j'ai finalement fini par convertir mon fichier en .mp3 (au lieu de .m4a) et là ça a fonctionné.                                                                                                                                                                                                                                                                                                                         |
| 10.05 | 2      |       | 2               | J'ai à nouveau aidé Benoît et Christopher pour différents problèmes, Benoît m'a aussi aidé pour le problème avec le fichier audio.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| 10.05 | 2      |       | 1               | Visite de M. Hurni. J'ai pu lui montrer le travail fait jusqu'à maintenant, et j'ai pu causer des cas limites avec la modification des épisodes. Notamment le fait que la date de planification peut être changée que lorsqu'elle est dans le futur, et elles n'ont pas besoin de suivre l'ordre chronologique, il est donc possible d'avoir un épisode 5 publié alors que le 4 ne l'est pas encore. Par rapport au fichier audio, je ne vais supporter que le .mp3, le vorbis (`.ogg`) et le opus. Le numéro des épisodes doit être stocké, il ne peut pas être généré dynamiquement. Il est est assigné automatiquement à la création de l'épisode. Rapide check du MCD et MLD c'est OK.            |
| 10.05 | 2      | #9    | 4               | J'ai généré les 3 types de fichiers audios pour le testing, avec choix random à la génération (dans `EpisodeFactory`). D'après mes tests manuels dans Firefox, le type MIME n'a pas besoin d'être donné pour la balise `<source>`. J'ai tenté d'intégrer Fontawesome pour pouvoir utiliser facilement des icônes dans mon projet, mais après avoir testé de 2 manières différentes, je n'y arrive pas. Je vais donc utiliser le CDN pour le moment (à voir s'il faut changer ou pas). J'ai eu beaucoup de problèmes aujourd'hui donc j'ai pas vraiment l'impression d'avoir avancé, et ça prend plus de temps que prévu cette tâche, mais je vais très bientôt pouvoir la terminer.                   |
|       |        |       |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 12.05 | 2      |       | 2               | J'ai aidé Benoît pour 2-3 questions et problèmes, et Christopher pour de la configuration de jetstream et refactoriser certaines parties.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 12.05 | 2      | #9    |                 | Comme je n'arrivais pas à utiliser Fontawesome l'autre jour et qu'il ne faut pas que je passe trop de temps là dessus, M. Hurni m'a dit que c'était ok que j'utilise des icônes en SVG directement dans le code.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 12.05 | 2      | #9    | 4               | J'ai fini d'implémenter la page de détails d'un podcast pour auteur, je n'ai juste pas pu tester la présence des icônes puisqu'elles n'ont pas de nom mais c'est une perte minime. J'ai changé la langue de l'application en Français, et j'ai fait la traduction des messages d'erreurs (de validation) utilisés (`required`, `max`, ...).                                                                                                                                                                                                                                                                                                                                                           |
| 12.05 | 2      | #6    | 6               | J'ai écrit 7 tests pour la création de podcast, j'ai importé le composant field, j'ai implémenté `create()` et `store()` dans mon `PodcastController`. J'ai commencé la mise à jour des infos d'un podcast via la page de détails. En conclusion, je suis plutôt content de ma journée, je n'ai pas eu trop de problèmes et j'ai relativement bien avancé.                                                                                                                                                                                                                                                                                                                                            |
|       |        |       |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 13.05 | 2      | #6    | 6               | J'ai pu refaire et terminer la refactorisation que j'avais commencé hier, dans le but de régler un bug qui faisait que le titre et la description d'un podcast ne se mettait pas à jour puisque la page ne se rechargeait pas. J'ai donc transformé un bout de Blade en un composant réactif, pour lui faire rafraîchir ses informations après la modification par le composant PodcastUpdate. J'ai ensuite documenté le composant réutilisable field dans ma documentation. La plupart du comportement est bien testée et implémentée, j'ai donc terminé cette tâche.                                                                                                                                |
| 13.05 | 2      |       | 1               | J'ai aidé Christopher, Altin et Benoît pour différents problèmes en PHP ou Laravel.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 13.05 | 2      | #7    | 3               | J'ai fait quelques modifications au composant field, pour qu'il soit plus adapté à mon besoin actuel. J'ai écrit des tests pour la création d'un épisode, j'ai pu commencer à implémenter cette fonctionnalité mais j'ai été bloqué sur la gestion du format d'un input datetime-local qui n'a pas le même format que celui dans la base de donnée. J'ai tenté quelquechose qui n'a pas marché mais je regarderai plus en détails la semaine prochaine. Plutôt content de ma journée et de l'avancement. Je n'ai juste pas fini mon sprint 2 et pas fait beaucoup de documentations cette semaine mais je ne suis pas en retard sur le projet.                                                        |
|       |        |       |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 16.05 | 3      | #7    | 6               | J'ai continué sur la tâche de la semaine passée, c'est à dire la création d'épisode. J'ai écrit plusieurs tests pour valider les données et tester que les valeurs par défaut soient définies pour mon nouvel épisode. J'ai réussi à faire fonctionner la création en excluant le fichier pour l'instant. J'ai aussi généré le nombre unique de l'épisode suivant, en suivant la recommendation de M. Hurni (utiliser la fonction `max(number)` en SQL) en utilisant Query Builder. J'ai ajouté une validation de sécurité: que l'utilisateur soit auteur du podcast (sur lequel est créé l'épisode). Et aussi un test pour valider que le fichier est bien sur le disque après la création.          |
| 16.05 | 3      | #7    | 5               | J'ai cherché les types MIME des formats audio que je dois supporter, pour ajouter des règles de validations, j'ai cité ma référence dans ma doc et j'ai écrit des tests qui tentent d'envoyer différents formats de fichiers. Et aussi d'envoyer un fichier trop lourd.  Journée correcte, un peu déçu de ne pas avoir fini cette fonctionnalité.                                                                                                                                                                                                                                                                                                                                                     |
|       |        |       |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 17.05 | 3      |       | 1               | Visite de M. Hurni, j'ai pu lui montrer l'avancement et lui poser quelques questions. Il m'a notamment dit suite à une question que le choix de la taille maximale d'un fichier est un choix politique, il faut juste qu'il soit raisonnable. J'ai défini cette limite à 150MB et commencé à documenté les réglages du `php.ini`. On a regardé rapidement le planning, les tâches vont être un peu retardée mais il n'y a pas besoin de retirer des choses à ce stade.                                                                                                                                                                                                                                |
| 17.05 | 3      | #7    | 7               | Grâce aux retours sur certains bouts de code, j'ai pu faire quelques refactorisations, notamment bouger `Episode::getNextNumber($podcastId)` vers `Podcast::getNextEpisodeNumber()`. On a aussi vu ensemble que les fichiers fake pour les tests générés par `UploadedFile::fake()` ne sont pas valides, il faut que j'utilise des vrais fichiers sur le disque à la place. Ensuite j'ai bien galéré pour fixer et tester la taille limite à 4 endroits différents à 150MB (`php.ini` 2 fois, config de Livewire pour les fichiers temporaires, validation finale à la création). J'ai récupéré un gros fichier audio de 170MB sur internet pour tester que cela était bien refusé par l'application. |
| 17.05 | 3      | #7    | 2               | J'ai ajouté une barre de progression pour que l'utilisateur ait une idée du temps restant d'upload (pour les fichiers lourds). J'ai aussi passé un moment à aider Christopher et Benoît, et je devrais plus me concentrer les prochains jours. J'ai eu beaucoup de peine et d'erreur avec cette upload de fichiers, c'était dur de perséverer. J'espère vraiment finir cette tâche (il reste vraiment plus grand chose) jeudi matin et pouvoir documenter les différents points techniques.                                                                                                                                                                                                           |
|       |        |       |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|       |        |       |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|       |        |       |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|       |        |       |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
